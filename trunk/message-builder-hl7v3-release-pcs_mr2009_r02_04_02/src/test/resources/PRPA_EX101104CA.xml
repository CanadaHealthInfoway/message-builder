<?xml version="1.0" encoding="UTF-8"?>
<!--

    Copyright 2012 Canada Health Infoway, Inc.

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

           http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

    Author:        $LastChangedBy$
    Last modified: $LastChangedDate$
    Revision:      $LastChangedRevision$

-->

<!--  
   Canada Health Infoway
   
   Author: CSI Developer Guides
   Date: 25jan2010
   Revision 1.1
   
-->
<PRPA_IN101104CA xmlns="urn:hl7-org:v3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   ITSVersion="XML_1.0">
   <realmCode code="CA"/>
   <id root="4adc4470-6287-11de-8a39-0800200c9a66"/>
   <creationTime value="20100125134455.100-0600"/>
   <responseModeCode code="I"/>
   <versionCode code="V3-2008N"/>
   <interactionId root="2.16.840.1.113883.1.18" extension="PRPA_IN101104CA" displayable="true"/>
   <profileId use="BUS" root="2.16.840.1.113883.2.20.2" extension="R02.04.01"/>
   <processingCode code="D"/>
   <processingModeCode code="T"/>
   <acceptAckCode code="NE"/>
   <receiver typeCode="RCV">
      <telecom value="http://www.albertahealthservices.ca/black"/>
      <device classCode="DEV" determinerCode="INSTANCE">
         <id use="BUS" root="2.16.840.1.113883.3.19.3.163.8" extension="DR-BLACK-EMR"/>
         <name>Dr. Black Family Physician EMR</name>
      </device>
   </receiver>
   <sender typeCode="SND">
      <telecom value="http://www.albertahealthservices.ca/clientregistry"/>
      <device classCode="DEV" determinerCode="INSTANCE">
         <id use="BUS" root="2.16.840.1.113883.3.19.3.163.8" extension="AB-CR"/>
         <name>Alberta Client Registry</name>
      </device>
   </sender>
   <acknowledgement>
      <typeCode code="AA"/>
      <targetMessage>
         <id root="3e1fa210-6280-11de-8a39-0800200c9a66"/>
      </targetMessage>
   </acknowledgement>
   <controlActEvent classCode="CACT" moodCode="EVN">
      <id use="BUS" root="fc9e18a0-6287-11de-8a39-0800200c9a66"/>
      <code codeSystem="2.16.840.1.113883.1.18" code="PRPA_TE101104CA"/>
      <statusCode code="completed"/>
      <effectiveTime xsi:type="IVL_TS">
         <low value="20100125134455.005-0600"/>
      </effectiveTime>
      <languageCode code="en" codeSystem="2.16.840.1.113883.6.121"/>
      <subject contextConductionInd="false" contextControlCode="ON" typeCode="SUBJ">
         <registrationEvent classCode="REG" moodCode="EVN">
            <statusCode code="active"/>
            <subject typeCode="SBJ" contextControlCode="AN">
               <identifiedEntity classCode="IDENT">
                  <!-- EMR Client Identifier -->
                  <id use="BUS" extension="E01-4566" root="2.16.840.1.113883.3.19.3.163.8.2.6"/>
                  <!-- Assigned Alberta Health Number -->
                  <id displayable="true" extension="9880897949" use="PUB"
                     root="2.16.840.1.113883.3.19.3.163.1" specializationType="II.PUBLIC"/>
                  <!-- Assigned Below-HIAL eCID -->
                  <id use="BUS" extension="8001-77948663" root="2.16.840.1.113883.3.19.3.163.1.1.12"/>
                  <statusCode code="active"/>
                  <effectiveTime>
                     <low value="20100122114401.0-0600"/>
                  </effectiveTime>
                  <confidentialityCode code="N" codeSystem="2.16.840.1.113883.5.25"/>
                  <identifiedPerson classCode="PSN" determinerCode="INSTANCE">
                     <name use="L">
                        <given>Cyril</given>
                        <given qualifier="IN">J</given>
                        <family>Lambert</family>
                     </name>
                     <telecom use="H" value="tel:+14036865188"/>
                     <telecom use="MC" value="tel:+14035555022"/>
                     <administrativeGenderCode code="M" codeSystem="2.16.840.1.113883.5.1"/>
                     <birthTime value="19491105"/>
                     <deceasedTime nullFlavor="NA"/>
                     <addr use="HP PST">
                        <streetAddressLine>3906 Silver Springs Blvd</streetAddressLine>
                        <city>Calgary</city>
                        <state>AB</state>
                        <postalCode>T3E 0K6</postalCode>
                     </addr>
                     <languageCommunication>
                        <languageCode code="en" codeSystem="2.16.840.1.113883.6.121"/>
                        <preferenceInd value="true"/>
                     </languageCommunication>
                  </identifiedPerson>
               </identifiedEntity>
            </subject>
            <custodian contextControlCode="AP" typeCode="CST">
               <assignedDevice classCode="ASSIGNED">
                  <id use="BUS" root="2.16.840.1.113883.3.19.3.163.8" extension="AB-CR"/>
                  <assignedRepository classCode="DEV" determinerCode="INSTANCE">
                     <name>Client Registry</name>
                  </assignedRepository>
                  <representedRepositoryJurisdiction classCode="STATE" determinerCode="INSTANCE">
                     <name>Alberta</name>
                  </representedRepositoryJurisdiction>
               </assignedDevice>
            </custodian>
         </registrationEvent>
      </subject>
      <subject contextConductionInd="false" contextControlCode="ON" typeCode="SUBJ">
         <registrationEvent classCode="REG" moodCode="EVN">
            <statusCode code="active"/>
            <subject typeCode="SBJ" contextControlCode="AN">
               <identifiedEntity classCode="IDENT">
                  <!-- PHN -->            
                  <id displayable="true" extension="9182299337"
                     root="2.16.840.1.113883.3.19.3.163.1" specializationType="II.PUBLIC"/>                  
                  <statusCode code="active"/>
                  <effectiveTime>
                     <low value="20090622"/>
                  </effectiveTime>
                  <confidentialityCode code="N" codeSystem="2.16.840.1.113883.5.25"/>
                  <identifiedPerson classCode="PSN" determinerCode="INSTANCE">
                     <name use="L">
                        <given>Cyril</given>
                        <family>Lambrick</family>
                     </name>
                     <telecom value="tel:+1403-878-9991"/>
                     <administrativeGenderCode code="M" codeSystem="2.16.840.1.113883.5.1"/>
                     <birthTime value="20050608"/>
                     <deceasedTime nullFlavor="NA"/>
                     <addr use="HP PST">
                        <streetAddressLine>2500 University Ave NW</streetAddressLine>
                        <city>Calgary</city>
                        <state>AB</state>
                        <postalCode>T2N 1W4</postalCode>
                     </addr>
                     <languageCommunication>
                        <languageCode code="en" codeSystem="2.16.840.1.113883.6.121"/>
                        <preferenceInd value="true"/>
                     </languageCommunication>
                  </identifiedPerson>
               </identifiedEntity>
            </subject>
            <custodian contextControlCode="AP" typeCode="CST">
               <assignedDevice classCode="ASSIGNED">
                  <id use="BUS" root="2.16.840.1.113883.3.19.3.163.8" extension="AB-CR"/>
                  <assignedRepository classCode="DEV" determinerCode="INSTANCE">
                     <name>Client Registry</name>
                  </assignedRepository>
                  <representedRepositoryJurisdiction classCode="STATE" determinerCode="INSTANCE">
                     <name>Alberta</name>
                  </representedRepositoryJurisdiction>
               </assignedDevice>
            </custodian>
         </registrationEvent>
      </subject>
      <queryAck>
         <queryId root="4e4814a0-6286-11de-8a39-0800200c9a66"/>
         <queryResponseCode code="OK"/>
         <resultTotalQuantity value="2"/>
         <resultCurrentQuantity value="2"/>
         <resultRemainingQuantity value="0"/>
      </queryAck>
      <queryByParameter>
         <queryId root="4e4814a0-6286-11de-8a39-0800200c9a66"/>
         <parameterList>
            <administrativeGender>
               <value code="M" codeSystem="2.16.840.1.113883.5.1"/>
            </administrativeGender>
            <personBirthtime>
               <value value="19491105"/>
            </personBirthtime>
            <personName>
               <value use="C L">
                  <given>Cyril</given>
                  <family>Lambert</family>
               </value>
            </personName>
         </parameterList>
      </queryByParameter>
   </controlActEvent>
</PRPA_IN101104CA>
