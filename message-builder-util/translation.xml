<project name="translation" default="sharpen">

	<property file="../translation.properties" />
	<import file="../translation-common.xml" />
	
	<target name="sharpen" depends="init">

		<property name="project" value="util" />
		<prepare-sharpen-workspace project="${project}" dir="${sharpen.workspace.dir}" />

		<exec dir="." executable="mvn">
                  <arg line="package"/>
                </exec>

		<sharpen workspace="${sharpen.workspace.dir}" resource="${project}">
			<args>
				<arg value="-cp" /><arg file="${target.dir}/dependencies/hamcrest-core-1.1.jar"/>
				<arg value="-cp" /><arg file="${target.dir}/dependencies/jmock-legacy-2.5.1.jar"/>
				<arg value="-cp" /><arg file="${target.dir}/dependencies/objenesis-1.0.jar"/>
				<arg value="-cp" /><arg file="${target.dir}/dependencies/cglib-nodep-2.1_3.jar"/>
				<arg value="-cp" /><arg file="${target.dir}/dependencies/commons-io-1.4.jar"/>
				<arg value="-cp" /><arg file="${target.dir}/dependencies/hamcrest-library-1.1.jar"/>
				<arg value="-cp" /><arg file="${target.dir}/dependencies/junit-4.7.jar"/>
				<arg value="-cp" /><arg file="${target.dir}/dependencies/commons-lang-2.4.jar"/>
				<arg value="-cp" /><arg file="${target.dir}/dependencies/jmock-2.5.1.jar"/>
				<arg value="-cp" /><arg file="${target.dir}/dependencies/junit-dep-4.4.jar"/>
				<arg value="-cp" /><arg file="${target.dir}/dependencies/jmock-junit4-2.5.1.jar"/>
				<!-- Sharpen options are defined in a separate file -->
				<arg value="@translation-all-options" />
			</args>
		</sharpen>

		<copy todir="${sharpen.workspace.dir}/../../../message-builder-core/target/translation/mbtdotnet/message-builder-util/Main" overwrite="true">
		  <fileset dir="${sharpen.workspace.dir}/${project}.net/src/main/java">
		    <include name="**/*.cs" />
		  </fileset>
		</copy>
		
		<!--
		<copy todir="${sharpen.workspace.dir}/../../../message-builder-core/target/translation/mbtdotnet/message-builder-util/Test" overwrite="true">
		  <fileset dir="${sharpen.workspace.dir}/${project}.net/src/test/java">
		    <include name="**/*.cs" />
		  </fileset>
		</copy>
		-->

		<!--
		<copy-sharpen-output todir="${sharpen.workspace.dir}/${project}.net/Main" fromdir="${sharpen.workspace.dir}/${project}.net/src/main/java" />
	 	<copy-sharpen-output todir="${sharpen.workspace.dir}/${project}.net/Test" fromdir="${sharpen.workspace.dir}/${project}.net/src/test/java" />
		-->
	</target>
	
	<target name="init">
		<reset-dir dir="${sharpen.workspace.dir}" />
	</target>

</project>
